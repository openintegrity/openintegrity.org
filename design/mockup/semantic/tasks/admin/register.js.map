{"version":3,"sources":["../../../../../../../content/design/mockup/semantic/tasks/admin/register.js"],"names":[],"mappings":";;;;;;;;;;AAUA;;EAEE,QAAQ,EAAE,OAAO,CAAC,eAAe,CAAC;;;EAGlC,QAAQ,EAAE,OAAO,CAAC,yBAAyB,CAAC;;;EAG5C,QAAQ,EAAE,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC;EAC1D,QAAQ,EAAE,KAAK,CAAC,MAAM;EACtB,QAAQ,EAAE,CAAC,CAAC;;EAEZ,MAAM;EACN;AACF;;AAEA,MAAM,CAAC,QAAQ,EAAE,QAAQ,CAAC,QAAQ,EAAE;;EAElC,OAAO,CAAC,GAAG,CAAC,yCAAyC,CAAC;;;EAGtD,SAAS,EAAE,QAAQ,CAAC,EAAE;IACpB,MAAM,EAAE,MAAM,EAAE,CAAC;IACjB,EAAE,CAAC,MAAM,GAAG,KAAK,EAAE;MACjB,QAAQ,CAAC,CAAC;MACV,MAAM;IACR;IACA;MACE,gBAAgB,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,WAAW,CAAC,CAAC;MAC5C,gBAAgB,EAAE,OAAO,CAAC,WAAW,EAAE,KAAK,EAAE,GAAG;MACjD,gBAAgB,EAAE,OAAO,CAAC,IAAI;MAC9B,gBAAgB,EAAE,CAAC,GAAG,EAAE,eAAe,CAAC;MACxC,gBAAgB,EAAE;IACpB;;;IAGA,IAAI,CAAC,SAAS,EAAE,YAAY,EAAE,QAAQ,CAAC,GAAG,EAAE,MAAM,EAAE,MAAM,EAAE;MAC1D,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,MAAM,EAAE,MAAM,CAAC;MAChC,QAAQ,CAAC,CAAC;IACZ,CAAC,CAAC;;EAEJ,CAAC;EACD,QAAQ,CAAC,CAAC;AACZ,CAAC","file":"register.js","sourcesContent":["/*******************************\n          Register PM\n*******************************/\n\n/*\n  Task to register component repos with Package Managers\n  * Registers component with bower\n  * Registers component with NPM\n*/\n\nvar\n  // node dependencies\n  process = require('child_process'),\n\n  // config\n  release = require('../config/admin/release'),\n\n  // register components and distributions\n  repos   = release.distributions.concat(release.components),\n  total   = repos.length,\n  index   = -1,\n\n  stream,\n  stepRepo\n;\n\nmodule.exports = function(callback) {\n\n  console.log('Registering repos with package managers');\n\n  // Do Git commands synchronously per component, to avoid issues\n  stepRepo = function() {\n    index = index + 1;\n    if(index >= total) {\n      callback();\n      return;\n    }\n    var\n      repo            = repos[index].toLowerCase(),\n      outputDirectory = release.outputRoot + repo + '/',\n      exec            = process.exec,\n      execSettings    = {cwd: outputDirectory},\n      updateNPM       = 'npm publish'\n    ;\n\n    /* Register with NPM */\n    exec(updateNPM, execSettings, function(err, stdout, stderr) {\n      console.log(err, stdout, stderr);\n      stepRepo();\n    });\n\n  };\n  stepRepo();\n};\n\n"]}