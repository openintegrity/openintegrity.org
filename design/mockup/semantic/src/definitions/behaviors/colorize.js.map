{"version":3,"sources":["../../../../../../../../content/design/mockup/semantic/src/definitions/behaviors/colorize.js"],"names":[],"mappings":"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","file":"colorize.js","sourcesContent":["/*!\n * # Semantic UI - Colorize\n * http://github.com/semantic-org/semantic-ui/\n *\n *\n * Copyright 2015 Contributors\n * Released under the MIT license\n * http://opensource.org/licenses/MIT\n *\n */\n\n;(function ( $, window, document, undefined ) {\n\n  \"use strict\";\n\n  $.fn.colorize = function(parameters) {\n    var\n      settings          = ( $.isPlainObject(parameters) )\n        ? $.extend(true, {}, $.fn.colorize.settings, parameters)\n        : $.extend({}, $.fn.colorize.settings),\n      // hoist arguments\n      moduleArguments = arguments || false\n    ;\n    $(this)\n      .each(function(instanceIndex) {\n\n        var\n          $module         = $(this),\n\n          mainCanvas      = $('<canvas />')[0],\n          imageCanvas     = $('<canvas />')[0],\n          overlayCanvas   = $('<canvas />')[0],\n\n          backgroundImage = new Image(),\n\n          // defs\n          mainContext,\n          imageContext,\n          overlayContext,\n\n          image,\n          imageName,\n\n          width,\n          height,\n\n          // shortucts\n          colors    = settings.colors,\n          paths     = settings.paths,\n          namespace = settings.namespace,\n          error     = settings.error,\n\n          // boilerplate\n          instance   = $module.data('module-' + namespace),\n          module\n        ;\n\n        module = {\n\n          checkPreconditions: function() {\n            module.debug('Checking pre-conditions');\n\n            if( !$.isPlainObject(colors) || $.isEmptyObject(colors) ) {\n              module.error(error.undefinedColors);\n              return false;\n            }\n            return true;\n          },\n\n          async: function(callback) {\n            if(settings.async) {\n              setTimeout(callback, 0);\n            }\n            else {\n              callback();\n            }\n          },\n\n          getMetadata: function() {\n            module.debug('Grabbing metadata');\n            image     = $module.data('image') || settings.image || undefined;\n            imageName = $module.data('name')  || settings.name  || instanceIndex;\n            width     = settings.width        || $module.width();\n            height    = settings.height       || $module.height();\n            if(width === 0 || height === 0) {\n              module.error(error.undefinedSize);\n            }\n          },\n\n          initialize: function() {\n            module.debug('Initializing with colors', colors);\n            if( module.checkPreconditions() ) {\n\n              module.async(function() {\n                module.getMetadata();\n                module.canvas.create();\n\n                module.draw.image(function() {\n                  module.draw.colors();\n                  module.canvas.merge();\n                });\n                $module\n                  .data('module-' + namespace, module)\n                ;\n              });\n            }\n          },\n\n          redraw: function() {\n            module.debug('Redrawing image');\n            module.async(function() {\n              module.canvas.clear();\n              module.draw.colors();\n              module.canvas.merge();\n            });\n          },\n\n          change: {\n            color: function(colorName, color) {\n              module.debug('Changing color', colorName);\n              if(colors[colorName] === undefined) {\n                module.error(error.missingColor);\n                return false;\n              }\n              colors[colorName] = color;\n              module.redraw();\n            }\n          },\n\n          canvas: {\n            create: function() {\n              module.debug('Creating canvases');\n\n              mainCanvas.width     = width;\n              mainCanvas.height    = height;\n              imageCanvas.width    = width;\n              imageCanvas.height   = height;\n              overlayCanvas.width  = width;\n              overlayCanvas.height = height;\n\n              mainContext    = mainCanvas.getContext('2d');\n              imageContext   = imageCanvas.getContext('2d');\n              overlayContext = overlayCanvas.getContext('2d');\n\n              $module\n                .append( mainCanvas )\n              ;\n              mainContext    = $module.children('canvas')[0].getContext('2d');\n            },\n            clear: function(context) {\n              module.debug('Clearing canvas');\n              overlayContext.fillStyle = '#FFFFFF';\n              overlayContext.fillRect(0, 0, width, height);\n            },\n            merge: function() {\n              if( !$.isFunction(mainContext.blendOnto) ) {\n                module.error(error.missingPlugin);\n                return;\n              }\n              mainContext.putImageData( imageContext.getImageData(0, 0, width, height), 0, 0);\n              overlayContext.blendOnto(mainContext, 'multiply');\n            }\n          },\n\n          draw: {\n\n            image: function(callback) {\n              module.debug('Drawing image');\n              callback = callback || function(){};\n              if(image) {\n                backgroundImage.src    = image;\n                backgroundImage.onload = function() {\n                  imageContext.drawImage(backgroundImage, 0, 0);\n                  callback();\n                };\n              }\n              else {\n                module.error(error.noImage);\n                callback();\n              }\n            },\n\n            colors: function() {\n              module.debug('Drawing color overlays', colors);\n              $.each(colors, function(colorName, color) {\n                settings.onDraw(overlayContext, imageName, colorName, color);\n              });\n            }\n\n          },\n\n          debug: function(message, variableName) {\n            if(settings.debug) {\n              if(variableName !== undefined) {\n                console.info(settings.name + ': ' + message, variableName);\n              }\n              else {\n                console.info(settings.name + ': ' + message);\n              }\n            }\n          },\n          error: function(errorMessage) {\n            console.warn(settings.name + ': ' + errorMessage);\n          },\n          invoke: function(methodName, context, methodArguments) {\n            var\n              method\n            ;\n            methodArguments = methodArguments || Array.prototype.slice.call( arguments, 2 );\n\n            if(typeof methodName == 'string' && instance !== undefined) {\n              methodName = methodName.split('.');\n              $.each(methodName, function(index, name) {\n                if( $.isPlainObject( instance[name] ) ) {\n                  instance = instance[name];\n                  return true;\n                }\n                else if( $.isFunction( instance[name] ) ) {\n                  method = instance[name];\n                  return true;\n                }\n                module.error(settings.error.method);\n                return false;\n              });\n            }\n            return ( $.isFunction( method ) )\n              ? method.apply(context, methodArguments)\n              : false\n            ;\n          }\n\n        };\n        if(instance !== undefined && moduleArguments) {\n          // simpler than invoke realizing to invoke itself (and losing scope due prototype.call()\n          if(moduleArguments[0] == 'invoke') {\n            moduleArguments = Array.prototype.slice.call( moduleArguments, 1 );\n          }\n          return module.invoke(moduleArguments[0], this, Array.prototype.slice.call( moduleArguments, 1 ) );\n        }\n        // initializing\n        module.initialize();\n      })\n    ;\n    return this;\n  };\n\n  $.fn.colorize.settings = {\n    name      : 'Image Colorizer',\n    debug     : true,\n    namespace : 'colorize',\n\n    onDraw    : function(overlayContext, imageName, colorName, color) {},\n\n    // whether to block execution while updating canvas\n    async     : true,\n    // object containing names and default values of color regions\n    colors    : {},\n\n    metadata: {\n      image : 'image',\n      name  : 'name'\n    },\n\n    error: {\n      noImage         : 'No tracing image specified',\n      undefinedColors : 'No default colors specified.',\n      missingColor    : 'Attempted to change color that does not exist',\n      missingPlugin   : 'Blend onto plug-in must be included',\n      undefinedHeight : 'The width or height of image canvas could not be automatically determined. Please specify a height.'\n    }\n\n  };\n\n})( jQuery, window, document );\n"]}